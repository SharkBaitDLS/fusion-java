(require "/check")

(define (free_ref)
  free)

(check_compile_exn
  (free_ref))   // ERROR

(define free "bird")
(check = "bird" (free_ref))

(define free "ball")
(check = "ball" (free_ref))

(module M "/fusion/base"
  (define free "money")
  (provide free))

(require "M")

(check = "money" free)
(check = "ball" (free_ref))

(define free "beer")
(check = "beer" free)
(check = "beer" (free_ref))


"SUCCESS"
