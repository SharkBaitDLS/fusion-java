// Copyright (c) 2012 Amazon.com, Inc.  All rights reserved.

(use check)

(check_equal ((lambda (x) (set x (+ x 1)) x) 0) 1 "set1")

(define counter
  (let ((c 0))
    (lambda ()
      (set c (+ 1 c))
      c)))

(check_equal (counter) 1 "counter1")
(check_equal (counter) 2 "counter2")
(check_equal (counter) 3 "counter3")

(check_equal
  (letrec
    [(x y),
     (y 2)]
    x)
  undef "letrec undef'd binding")
